<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Jetons Poker</title>
    <style>
        /* --- STYLE (CSS) --- */
        :root {
            --bg-color: #2c3e50;
            --felt-color: #27ae60;
            --card-bg: #ecf0f1;
            --text-color: #2c3e50;
            --accent-color: #e67e22;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--felt-color); /* Tapis vert */
            margin: 0;
            padding: 20px;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 { margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }

        /* √âcran de configuration */
        #setup-screen, #game-screen {
            width: 100%;
            max-width: 400px;
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 15px;
        }

        .hidden { display: none !important; }

        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: none;
            box-sizing: border-box; 
            font-size: 16px;
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
            transition: transform 0.1s;
        }

        button:active { transform: scale(0.98); }
        button.secondary { background-color: #7f8c8d; }

        /* Liste des joueurs (Setup) */
        #player-list-setup div {
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            margin-bottom: 5px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
        }

        /* Grille des joueurs (Jeu) */
        .player-card {
            background: var(--card-bg);
            color: var(--text-color);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .player-name { font-weight: bold; font-size: 1.1em; }
        .player-stack { font-size: 1.4em; color: #27ae60; font-weight: bold; }

        /* Modal de transfert */
        #transfer-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 85%;
            max-width: 350px;
            color: black;
        }

        .modal-title { font-size: 1.2em; font-weight: bold; margin-bottom: 15px; text-align: center; }
    </style>
</head>
<body>

    <h1>‚ô£Ô∏è Poker Manager ‚ô¶Ô∏è</h1>

    <div id="setup-screen">
        <h3>Configuration</h3>
        <input type="number" id="start-stack" placeholder="Tapis de d√©part (ex: 1500)" value="1500">
        <hr style="border: 0.5px solid rgba(255,255,255,0.2);">
        <input type="text" id="new-player-name" placeholder="Nom du joueur">
        <button onclick="addPlayer()">+ Ajouter Joueur</button>
        
        <div id="player-list-setup" style="margin: 15px 0;"></div>
        
        <button onclick="startGame()" style="background-color: #2ecc71;">Lancer la partie</button>
    </div>

    <div id="game-screen" class="hidden">
        <div id="players-container">
            </div>
        
        <div style="margin-top: 20px;">
            <button onclick="openTransferModal()">üîÑ Transf√©rer des Jetons</button>
            <button onclick="resetGame()" class="secondary">Nouvelle Partie</button>
        </div>
    </div>

    <div id="transfer-modal" class="hidden">
        <div class="modal-content">
            <div class="modal-title">Qui a perdu contre qui ?</div>
            
            <label>Perdant (Donne les jetons)</label>
            <select id="sender-select"></select>
            
            <label>Gagnant (Re√ßoit les jetons)</label>
            <select id="receiver-select"></select>
            
            <label>Montant</label>
            <input type="number" id="amount-input" placeholder="0">
            
            <button onclick="executeTransfer()" style="background-color: #27ae60;">Valider</button>
            <button onclick="closeTransferModal()" class="secondary">Annuler</button>
        </div>
    </div>

    <script>
        /* --- LOGIQUE (JAVASCRIPT) --- */
        let players = [];
        let initialStack = 1500;

        // Ajouter un joueur lors de la configuration
        function addPlayer() {
            const nameInput = document.getElementById('new-player-name');
            const name = nameInput.value.trim();
            if (name) {
                players.push({ id: Date.now(), name: name, stack: 0 });
                nameInput.value = '';
                renderSetupList();
            }
        }

        // Afficher la liste des joueurs dans le setup
        function renderSetupList() {
            const container = document.getElementById('player-list-setup');
            container.innerHTML = players.map(p => `<div>${p.name}</div>`).join('');
        }

        // D√©marrer la partie
        function startGame() {
            if (players.length < 2) {
                alert("Il faut au moins 2 joueurs !");
                return;
            }
            initialStack = parseInt(document.getElementById('start-stack').value) || 1500;
            
            // On donne les jetons √† tout le monde
            players.forEach(p => p.stack = initialStack);
            
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            renderGame();
        }

        // Afficher les joueurs et leurs jetons (√âcran de jeu)
        function renderGame() {
            const container = document.getElementById('players-container');
            container.innerHTML = players.map(p => `
                <div class="player-card">
                    <span class="player-name">${p.name}</span>
                    <span class="player-stack">${p.stack} $</span>
                </div>
            `).join('');
        }

        // Gestion du Modal de Transfert
        function openTransferModal() {
            const senderSelect = document.getElementById('sender-select');
            const receiverSelect = document.getElementById('receiver-select');
            
            // Remplir les listes d√©roulantes
            const options = players.map(p => `<option value="${p.id}">${p.name} (${p.stack}$)</option>`).join('');
            senderSelect.innerHTML = options;
            receiverSelect.innerHTML = options;
            
            // Emp√™cher de s√©lectionner le m√™me joueur par d√©faut (si possible)
            if (players.length > 1) receiverSelect.selectedIndex = 1;

            document.getElementById('amount-input').value = '';
            document.getElementById('transfer-modal').classList.remove('hidden');
        }

        function closeTransferModal() {
            document.getElementById('transfer-modal').classList.add('hidden');
        }

        // Ex√©cuter le transfert d'argent
        function executeTransfer() {
            const senderId = parseInt(document.getElementById('sender-select').value);
            const receiverId = parseInt(document.getElementById('receiver-select').value);
            const amount = parseInt(document.getElementById('amount-input').value);

            if (senderId === receiverId) {
                alert("Le perdant et le gagnant ne peuvent pas √™tre la m√™me personne.");
                return;
            }
            if (!amount || amount <= 0) {
                alert("Veuillez entrer un montant valide.");
                return;
            }

            const sender = players.find(p => p.id === senderId);
            const receiver = players.find(p => p.id === receiverId);

            if (sender.stack < amount) {
                alert(`${sender.name} n'a pas assez de jetons ! (Tapis: ${sender.stack})`);
                return;
            }

            // Transaction
            sender.stack -= amount;
            receiver.stack += amount;

            renderGame();
            closeTransferModal();
        }

        // R√©initialiser
        function resetGame() {
            if(confirm("Voulez-vous vraiment recommencer une nouvelle partie ?")) {
                players = [];
                document.getElementById('game-screen').classList.add('hidden');
                document.getElementById('setup-screen').classList.remove('hidden');
                renderSetupList();
            }
        }
    </script>
</body>
</html>
